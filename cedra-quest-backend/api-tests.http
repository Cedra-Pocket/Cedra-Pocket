# Cedra Quest Backend API Tests
# Use with VS Code REST Client extension or similar tools

@baseUrl = http://localhost:9999

### 1. Test Root Endpoint
GET {{baseUrl}}/

### 2. Health Check
GET {{baseUrl}}/health

### 3. Test Auth Helper
GET {{baseUrl}}/test/auth

### 4. Test Quests (No Auth Required)
GET {{baseUrl}}/test/quests

### 5. Test Authentication (Will fail with mock data - expected)
POST {{baseUrl}}/auth/verify
Content-Type: application/json

{
  "initData": "user=%7B%22id%22%3A123456789%2C%22first_name%22%3A%22Test%22%2C%22username%22%3A%22testuser%22%7D&auth_date=1640995200&hash=test_hash"
}

### 6. Test Protected Quests Endpoint (Should return 401)
GET {{baseUrl}}/quests

### 7. Test User Profile (Should return 401)
GET {{baseUrl}}/users/profile

### 8. Test Quest Details (Should return 401)
GET {{baseUrl}}/quests/1

### 9. Test Quest Verification (Should return 401)
POST {{baseUrl}}/quests/1/verify
Content-Type: application/json

{
  "proof_data": {
    "test": true
  }
}

### 10. Test with JWT Token (Replace YOUR_JWT_TOKEN with actual token)
# First get token from successful auth, then use it:

GET {{baseUrl}}/users/profile
Authorization: Bearer YOUR_JWT_TOKEN

### 11. Test Protected Quests with JWT
GET {{baseUrl}}/quests
Authorization: Bearer YOUR_JWT_TOKEN

### 12. Test Quest Verification with JWT
POST {{baseUrl}}/quests/1/verify
Authorization: Bearer YOUR_JWT_TOKEN
Content-Type: application/json

{
  "proof_data": {
    "platform": "twitter",
    "action": "follow",
    "completed": true
  }
}

### 13. Test Connect Wallet
POST {{baseUrl}}/users/connect-wallet
Authorization: Bearer YOUR_JWT_TOKEN
Content-Type: application/json

{
  "wallet_address": "0x1234567890123456789012345678901234567890"
}

### 14. Test Create Quest (Admin only - will need proper auth)
POST {{baseUrl}}/quests
Authorization: Bearer YOUR_JWT_TOKEN
Content-Type: application/json

{
  "title": "Test Quest",
  "description": "This is a test quest",
  "type": "SOCIAL",
  "category": "twitter",
  "config": {
    "platform": "twitter",
    "action": "follow",
    "target_id": "@cedra_network"
  },
  "reward_amount": 100,
  "reward_type": "POINT",
  "frequency": "ONCE"
}